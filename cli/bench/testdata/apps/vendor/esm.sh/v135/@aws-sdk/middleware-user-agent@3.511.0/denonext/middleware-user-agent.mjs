/* esm.sh - esbuild bundle(@aws-sdk/middleware-user-agent@3.511.0) denonext production */
function w(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}import{getUserAgentPrefix as S}from"/v135/@aws-sdk/util-endpoints@3.511.0/denonext/util-endpoints.mjs";import{HttpRequest as R}from"/v135/@smithy/protocol-http@3.1.1/denonext/protocol-http.mjs";var i="user-agent",c="x-amz-user-agent",p=" ",a="/",l=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,m=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,g="-";var C=e=>(s,_)=>async n=>{let{request:o}=n;if(!R.isInstance(o))return s(n);let{headers:t}=o,r=_?.userAgent?.map(u)||[],A=(await e.defaultUserAgentProvider()).map(u),E=e?.customUserAgent?.map(u)||[],d=S(),f=(d?[d]:[]).concat([...A,...r,...E]).join(p),U=[...A.filter(x=>x.startsWith("aws-sdk-")),...E].join(p);return e.runtime!=="browser"?(U&&(t[c]=t[c]?`${t[i]} ${U}`:U),t[i]=f):t[c]=f,s({...n,request:o})},u=e=>{let s=e[0].split(a).map(r=>r.replace(l,g)).join(a),_=e[1]?.replace(m,g),n=s.indexOf(a),o=s.substring(0,n),t=s.substring(n+1);return o==="api"&&(t=t.toLowerCase()),[o,t,_].filter(r=>r&&r.length>0).reduce((r,A,E)=>{switch(E){case 0:return A;case 1:return`${r}/${A}`;default:return`${r}#${A}`}},"")},P={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},X=e=>({applyToStack:s=>{s.add(C(e),P)}});export{P as getUserAgentMiddlewareOptions,X as getUserAgentPlugin,w as resolveUserAgentConfig,C as userAgentMiddleware};
//# sourceMappingURL=middleware-user-agent.mjs.map