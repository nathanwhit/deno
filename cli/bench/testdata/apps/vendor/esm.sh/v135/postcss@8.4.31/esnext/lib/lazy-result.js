/* esm.sh - esbuild bundle(postcss@8.4.31/lib/lazy-result) esnext production */
import * as __0$ from "/v135/postcss@8.4.31/esnext/lib/symbols.js";
import * as __1$ from "/v135/postcss@8.4.31/esnext/lib/map-generator.js";
import * as __2$ from "/v135/postcss@8.4.31/esnext/lib/stringify.js";
import * as __3$ from "/v135/postcss@8.4.31/esnext/lib/container.js";
import * as __4$ from "/v135/postcss@8.4.31/esnext/lib/warn-once.js";
import * as __5$ from "/v135/postcss@8.4.31/esnext/lib/result.js";
import * as __6$ from "/v135/postcss@8.4.31/esnext/lib/parse.js";
import * as __7$ from "/v135/postcss@8.4.31/esnext/lib/root.js";
import * as __8$ from "/v135/postcss@8.4.31/esnext/lib/container.js";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"postcss/lib/symbols":return e(__0$);case"postcss/lib/map-generator":return e(__1$);case"postcss/lib/stringify":return e(__2$);case"postcss/lib/container":return e(__3$);case"postcss/lib/warn-once":return e(__4$);case"postcss/lib/result":return e(__5$);case"postcss/lib/parse":return e(__6$);case"postcss/lib/root":return e(__7$);default:throw new Error("module \""+n+"\" not found");}};
var D=Object.create;var d=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var u=(s=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(s,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):s)(function(s){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+s+'" is not supported')});var P=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),j=(s,e)=>{for(var t in e)d(s,t,{get:e[t],enumerable:!0})},m=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of N(e))!T.call(s,i)&&i!==t&&d(s,i,{get:()=>e[i],enumerable:!(r=q(e,i))||r.enumerable});return s},p=(s,e,t)=>(m(s,e,"default"),t&&m(t,e,"default")),S=(s,e,t)=>(t=s!=null?D(k(s)):{},m(e||!s||!s.__esModule?d(t,"default",{value:s,enumerable:!0}):t,s));var I=P((tt,C)=>{"use strict";var z=u("postcss/lib/container"),R,O,c=class extends z{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new R(new O,this,e).stringify()}};c.registerLazyResult=s=>{R=s};c.registerProcessor=s=>{O=s};C.exports=c;c.default=c});var E=P((rt,A)=>{"use strict";var{isClean:l,my:M}=u("postcss/lib/symbols"),U=u("postcss/lib/map-generator"),$=u("postcss/lib/stringify"),G=u("postcss/lib/container"),Y=I(),et=u("postcss/lib/warn-once"),b=u("postcss/lib/result"),B=u("postcss/lib/parse"),H=u("postcss/lib/root"),W={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Z={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},J={Once:!0,postcssPlugin:!0,prepare:!0},g=0;function y(s){return typeof s=="object"&&typeof s.then=="function"}function L(s){let e=!1,t=W[s.type];return s.type==="decl"?e=s.prop.toLowerCase():s.type==="atrule"&&(e=s.name.toLowerCase()),e&&s.append?[t,t+"-"+e,g,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:s.append?[t,g,t+"Exit"]:[t,t+"Exit"]}function V(s){let e;return s.type==="document"?e=["Document",g,"DocumentExit"]:s.type==="root"?e=["Root",g,"RootExit"]:e=L(s),{eventIndex:0,events:e,iterator:0,node:s,visitorIndex:0,visitors:[]}}function w(s){return s[l]=!1,s.nodes&&s.nodes.forEach(e=>w(e)),s}var x={},h=class s{constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=w(t);else if(t instanceof s||t instanceof b)i=w(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let n=B;r.syntax&&(n=r.syntax.parse),r.parser&&(n=r.parser),n.parse&&(n=n.parse);try{i=n(t,r)}catch(o){this.processed=!0,this.error=o}i&&!i[M]&&G.rebuild(i)}this.result=new b(e,i,r),this.helpers={...x,postcss:x,result:this.result},this.plugins=this.processor.plugins.map(n=>typeof n=="object"&&n.prepare?{...n,...n.prepare(this.result)}:n)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=(t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])};for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!Z[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!J[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(y(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[l];){e[l]=!0;let t=[V(e)];for(;t.length>0;){let r=this.visitTick(t);if(y(r))try{await r}catch(i){let n=t[t.length-1].node;throw this.handleError(i,n)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(n=>r(n,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return y(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=$;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new U(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(y(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[l];)e[l]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let n;try{n=i(t,this.helpers)}catch(o){throw this.handleError(o,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(y(n))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[o,a]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=o;try{return a(r.toProxy(),this.helpers)}catch(v){throw this.handleError(v,r)}}if(t.iterator!==0){let o=t.iterator,a;for(;a=r.nodes[r.indexes[o]];)if(r.indexes[o]+=1,!a[l]){a[l]=!0,e.push(V(a));return}t.iterator=0,delete r.indexes[o]}let n=t.events;for(;t.eventIndex<n.length;){let o=n[t.eventIndex];if(t.eventIndex+=1,o===g){r.nodes&&r.nodes.length&&(r[l]=!0,t.iterator=r.getIterator());return}else if(this.listeners[o]){t.visitors=this.listeners[o];return}}e.pop()}walkSync(e){e[l]=!0;let t=L(e);for(let r of t)if(r===g)e.nodes&&e.each(i=>{i[l]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};h.registerPostcss=s=>{x=s};A.exports=h;h.default=h;H.registerLazyResult(h);Y.registerLazyResult(h)});var f={};j(f,{default:()=>X});var K=S(E());p(f,S(E()));var{default:_,...Q}=K,X=_!==void 0?_:Q;export{X as default};
//# sourceMappingURL=lazy-result.js.map