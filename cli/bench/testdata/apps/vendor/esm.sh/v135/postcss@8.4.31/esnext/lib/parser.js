/* esm.sh - esbuild bundle(postcss@8.4.31/lib/parser) esnext production */
import * as __0$ from "/v135/postcss@8.4.31/esnext/lib/declaration.js";
import * as __1$ from "/v135/postcss@8.4.31/esnext/lib/tokenize.js";
import * as __2$ from "/v135/postcss@8.4.31/esnext/lib/comment.js";
import * as __3$ from "/v135/postcss@8.4.31/esnext/lib/at-rule.js";
import * as __4$ from "/v135/postcss@8.4.31/esnext/lib/root.js";
import * as __5$ from "/v135/postcss@8.4.31/esnext/lib/rule.js";
var require=n=>{const e=m=>typeof m.default<"u"?m.default:m,c=m=>Object.assign({},m);switch(n){case"postcss/lib/declaration":return e(__0$);case"postcss/lib/tokenize":return e(__1$);case"postcss/lib/comment":return e(__2$);case"postcss/lib/at-rule":return e(__3$);case"postcss/lib/root":return e(__4$);case"postcss/lib/rule":return e(__5$);default:throw new Error("module \""+n+"\" not found");}};
var T=Object.create;var b=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,W=Object.prototype.hasOwnProperty;var m=(o=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(o,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):o)(function(o){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+o+'" is not supported')});var v=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),M=(o,e)=>{for(var t in e)b(o,t,{get:e[t],enumerable:!0})},g=(o,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _(e))!W.call(o,i)&&i!==t&&b(o,i,{get:()=>e[i],enumerable:!(s=O(e,i))||s.enumerable});return o},d=(o,e,t)=>(g(o,e,"default"),t&&g(t,e,"default")),F=(o,e,t)=>(t=o!=null?T(E(o)):{},g(e||!o||!o.__esModule?b(t,"default",{value:o,enumerable:!0}):t,o));var y=v((H,S)=>{"use strict";var q=m("postcss/lib/declaration"),R=m("postcss/lib/tokenize"),B=m("postcss/lib/comment"),N=m("postcss/lib/at-rule"),U=m("postcss/lib/root"),z=m("postcss/lib/rule"),C={empty:!0,space:!0};function j(o){for(let e=o.length-1;e>=0;e--){let t=o[e],s=t[3]||t[2];if(s)return s}}var x=class{constructor(e){this.input=e,this.root=new U,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new N;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let s,i,r,h=!1,a=!1,n=[],l=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),s=e[0],s==="("||s==="["?l.push(s==="("?")":"]"):s==="{"&&l.length>0?l.push("}"):s===l[l.length-1]&&l.pop(),l.length===0)if(s===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(s==="{"){a=!0;break}else if(s==="}"){if(n.length>0){for(r=n.length-1,i=n[r];i&&i[0]==="space";)i=n[--r];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else n.push(e);else n.push(e);if(this.tokenizer.endOfFile()){h=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(n),n.length?(t.raws.afterName=this.spacesAndCommentsFromStart(n),this.raw(t,"params",n),h&&(e=n[n.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),a&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let s=0,i;for(let r=t-1;r>=0&&(i=e[r],!(i[0]!=="space"&&(s+=1,s===2)));r--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,s,i,r;for(let[h,a]of e.entries()){if(s=a,i=s[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!r)this.doubleColon(s);else{if(r[0]==="word"&&r[1]==="progid")continue;return h}r=s}return!1}comment(e){let t=new B;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let s=e[1].slice(2,-2);if(/^\s*$/.test(s))t.text="",t.raws.left=s,t.raws.right="";else{let i=s.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=R(this.input)}decl(e,t){let s=new q;this.init(s,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),s.source.end=this.getPosition(i[3]||i[2]||j(e)),s.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),s.raws.before+=e.shift()[1];for(s.source.start=this.getPosition(e[0][2]),s.prop="";e.length;){let l=e[0][0];if(l===":"||l==="space"||l==="comment")break;s.prop+=e.shift()[1]}s.raws.between="";let r;for(;e.length;)if(r=e.shift(),r[0]===":"){s.raws.between+=r[1];break}else r[0]==="word"&&/\w/.test(r[1])&&this.unknownWord([r]),s.raws.between+=r[1];(s.prop[0]==="_"||s.prop[0]==="*")&&(s.raws.before+=s.prop[0],s.prop=s.prop.slice(1));let h=[],a;for(;e.length&&(a=e[0][0],!(a!=="space"&&a!=="comment"));)h.push(e.shift());this.precheckMissedSemicolon(e);for(let l=e.length-1;l>=0;l--){if(r=e[l],r[1].toLowerCase()==="!important"){s.important=!0;let f=this.stringFrom(e,l);f=this.spacesFromEnd(e)+f,f!==" !important"&&(s.raws.important=f);break}else if(r[1].toLowerCase()==="important"){let f=e.slice(0),u="";for(let c=l;c>0;c--){let w=f[c][0];if(u.trim().indexOf("!")===0&&w!=="space")break;u=f.pop()[1]+u}u.trim().indexOf("!")===0&&(s.important=!0,s.raws.important=u,e=f)}if(r[0]!=="space"&&r[0]!=="comment")break}e.some(l=>l[0]!=="space"&&l[0]!=="comment")&&(s.raws.between+=h.map(l=>l[1]).join(""),h=[]),this.raw(s,"value",h.concat(e),t),s.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new z;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,s=null,i=!1,r=null,h=[],a=e[1].startsWith("--"),n=[],l=e;for(;l;){if(s=l[0],n.push(l),s==="("||s==="[")r||(r=l),h.push(s==="("?")":"]");else if(a&&i&&s==="{")r||(r=l),h.push("}");else if(h.length===0)if(s===";")if(i){this.decl(n,a);return}else break;else if(s==="{"){this.rule(n);return}else if(s==="}"){this.tokenizer.back(n.pop()),t=!0;break}else s===":"&&(i=!0);else s===h[h.length-1]&&(h.pop(),h.length===0&&(r=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),h.length>0&&this.unclosedBracket(r),t&&i){if(!a)for(;n.length&&(l=n[n.length-1][0],!(l!=="space"&&l!=="comment"));)this.tokenizer.back(n.pop());this.decl(n,a)}else this.unknownWord(n)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,s,i){let r,h,a=s.length,n="",l=!0,f,u;for(let c=0;c<a;c+=1)r=s[c],h=r[0],h==="space"&&c===a-1&&!i?l=!1:h==="comment"?(u=s[c-1]?s[c-1][0]:"empty",f=s[c+1]?s[c+1][0]:"empty",!C[u]&&!C[f]?n.slice(-1)===","?l=!1:n+=r[1]:l=!1):n+=r[1];if(!l){let c=s.reduce((w,A)=>w+A[1],"");e.raws[t]={raw:c,value:n}}e[t]=n}rule(e){e.pop();let t=new z;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)s=e.pop()[1]+s;return s}spacesAndCommentsFromStart(e){let t,s="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)s+=e.shift()[1];return s}spacesFromEnd(e){let t,s="";for(;e.length&&(t=e[e.length-1][0],t==="space");)s=e.pop()[1]+s;return s}stringFrom(e,t){let s="";for(let i=t;i<e.length;i++)s+=e[i][1];return e.splice(t,e.length-t),s}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};S.exports=x});var p={};M(p,{default:()=>$});var L=F(y());d(p,F(y()));var{default:P,...D}=L,$=P!==void 0?P:D;export{$ as default};
//# sourceMappingURL=parser.js.map